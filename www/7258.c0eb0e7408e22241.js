"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7258],{7258:(D,g,r)=>{r.r(g),r.d(g,{EventDetailPage:()=>M});var s=r(467),d=r(2881),_=r(4341),a=r(9420),t=r(1360),m=r(9609),p=r(2022),u=r(3615);function h(o,c){1&o&&(t.j41(0,"div",6),t.nrm(1,"ion-spinner",7),t.k0s())}function f(o,c){if(1&o&&(t.j41(0,"div",17),t.nrm(1,"ion-icon",23),t.j41(2,"ion-label")(3,"h2"),t.EFF(4,"Invitados"),t.k0s(),t.j41(5,"p"),t.EFF(6),t.k0s()()()),2&o){const e=t.XpG(2);t.R7$(6),t.SpI("Hasta ",e.event.max_guests," personas")}}function P(o,c){if(1&o&&(t.j41(0,"ion-item"),t.nrm(1,"ion-icon",26),t.j41(2,"ion-label"),t.EFF(3),t.k0s()()),2&o){const e=c.$implicit;t.R7$(3),t.JRh(e)}}function O(o,c){if(1&o&&(t.j41(0,"ion-col",15)(1,"ion-card",16)(2,"ion-card-content")(3,"h2",24),t.EFF(4,"Actividades"),t.k0s(),t.j41(5,"ion-list"),t.DNE(6,P,4,1,"ion-item",25),t.k0s()()()()),2&o){const e=t.XpG(2);t.R7$(6),t.Y8G("ngForOf",e.event.activities)}}function x(o,c){if(1&o){const e=t.RV6();t.j41(0,"ion-col",15)(1,"ion-grid",27)(2,"ion-row")(3,"ion-col")(4,"ion-button",28),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.editEvent())}),t.nrm(5,"ion-icon",29),t.EFF(6," Editar "),t.k0s()(),t.j41(7,"ion-col")(8,"ion-button",30),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.confirmDelete())}),t.nrm(9,"ion-icon",31),t.EFF(10," Eliminar "),t.k0s()()()()()}}function C(o,c){if(1&o&&(t.j41(0,"div",8)(1,"div",9),t.nrm(2,"div",10),t.j41(3,"h1",11),t.EFF(4),t.k0s(),t.j41(5,"p",12),t.EFF(6),t.nI1(7,"date"),t.k0s()(),t.j41(8,"div",13)(9,"ion-grid",14)(10,"ion-row")(11,"ion-col",15)(12,"ion-card",16)(13,"ion-card-content")(14,"div",17),t.nrm(15,"ion-icon",18),t.j41(16,"ion-label")(17,"h2"),t.EFF(18,"Fecha y Hora"),t.k0s(),t.j41(19,"p"),t.EFF(20),t.nI1(21,"date"),t.nI1(22,"date"),t.k0s()()(),t.j41(23,"div",17),t.nrm(24,"ion-icon",19),t.j41(25,"ion-label")(26,"h2"),t.EFF(27,"Ubicaci\xf3n"),t.k0s(),t.j41(28,"p"),t.EFF(29),t.k0s()()(),t.DNE(30,f,7,1,"div",20),t.j41(31,"div",17),t.nrm(32,"ion-icon",21),t.j41(33,"ion-label")(34,"h2"),t.EFF(35,"Descripci\xf3n"),t.k0s(),t.j41(36,"p"),t.EFF(37),t.k0s()()()()()(),t.DNE(38,O,7,1,"ion-col",22)(39,x,11,0,"ion-col",22),t.k0s()()()()),2&o){const e=t.XpG();t.R7$(),t.xc7("background-image","url(/assets/icon/event-bg.jpg)"),t.R7$(3),t.JRh(e.event.title),t.R7$(2),t.JRh(t.i5U(7,11,e.event.date,"fullDate")),t.R7$(14),t.Lme("",t.i5U(21,14,e.event.date,"fullDate")," a las ",t.i5U(22,17,e.event.date+"T"+e.event.time,"h:mm a"),""),t.R7$(9),t.JRh(e.event.location),t.R7$(),t.Y8G("ngIf",e.event.max_guests),t.R7$(7),t.JRh(e.event.description||"No hay descripci\xf3n."),t.R7$(),t.Y8G("ngIf",e.event.activities&&e.event.activities.length>0),t.R7$(),t.Y8G("ngIf",!e.isLoading&&e.event&&e.isOwner)}}let M=(()=>{var o;class c{constructor(n,i,l,v,b,E){this.route=n,this.router=i,this.eventService=l,this.alertController=v,this.toastController=b,this.supabase=E,this.event=null,this.isLoading=!0,this.isOwner=!1}ngOnInit(){this.loadEventDetails()}loadEventDetails(){var n=this;return(0,s.A)(function*(){const i=n.route.snapshot.paramMap.get("id");if(!i)return n.isLoading=!1,void n.router.navigateByUrl("/home");try{n.event=yield n.eventService.getEventById(i),n.checkOwnership()}catch(l){console.error("Error loading event details:",l),yield n.showToast("Error al cargar el evento","danger")}finally{n.isLoading=!1}})()}checkOwnership(){var n=this;return(0,s.A)(function*(){if(!n.event)return void(n.isOwner=!1);const{data:{user:i}}=yield n.supabase.client.auth.getUser();n.isOwner=(null==i?void 0:i.id)===n.event.created_by})()}editEvent(){var n;null!==(n=this.event)&&void 0!==n&&n.id&&this.router.navigate(["/edit-event",this.event.id])}confirmDelete(){var n=this;return(0,s.A)(function*(){yield(yield n.alertController.create({header:"Confirmar Eliminaci\xf3n",message:"\xbfEst\xe1s seguro de que deseas eliminar este evento? Esta acci\xf3n no se puede deshacer.",buttons:[{text:"Cancelar",role:"cancel"},{text:"Eliminar",cssClass:"alert-button-danger",handler:()=>n.deleteEvent()}]})).present()})()}deleteEvent(){var n=this;return(0,s.A)(function*(){var i;if(null!==(i=n.event)&&void 0!==i&&i.id){n.isLoading=!0;try{(yield n.eventService.deleteEvent(n.event.id))?(yield n.showToast("Evento eliminado exitosamente","success"),n.router.navigateByUrl("/home")):yield n.showToast("Error al eliminar el evento","danger")}catch{yield n.showToast("Error al eliminar el evento","danger")}finally{n.isLoading=!1}}})()}showToast(n,i){var l=this;return(0,s.A)(function*(){yield(yield l.toastController.create({message:n,duration:3e3,color:i,position:"top"})).present()})()}}return(o=c).\u0275fac=function(n){return new(n||o)(t.rXU(m.nX),t.rXU(m.Ix),t.rXU(p.U),t.rXU(a.hG),t.rXU(a.K_),t.rXU(u.w))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-event-detail"]],decls:9,vars:3,consts:[[1,"ion-no-border"],["slot","start"],["defaultHref","/home","text","","color","white"],[3,"fullscreen"],["class","ion-text-center ion-padding",4,"ngIf"],["class","content-container",4,"ngIf"],[1,"ion-text-center","ion-padding"],["name","crescent"],[1,"content-container"],[1,"header-container"],[1,"header-overlay"],[1,"event-title"],[1,"event-subtitle"],[1,"centered-content"],[1,"ion-padding","main-grid"],["size","12"],[1,"detail-card"],[1,"detail-item"],["name","calendar-outline","slot","start"],["name","location-outline","slot","start"],["class","detail-item",4,"ngIf"],["name","reader-outline","slot","start"],["size","12",4,"ngIf"],["name","people-outline","slot","start"],[1,"activities-title"],[4,"ngFor","ngForOf"],["name","checkmark-circle-outline","slot","start"],[1,"action-buttons"],["expand","block",3,"click"],["name","create-outline","slot","start"],["expand","block","color","danger",3,"click"],["name","trash-outline","slot","start"]],template:function(n,i){1&n&&(t.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),t.nrm(3,"ion-back-button",2),t.k0s(),t.j41(4,"ion-title"),t.EFF(5,"Detalles del corito"),t.k0s()()(),t.j41(6,"ion-content",3),t.DNE(7,h,2,0,"div",4)(8,C,40,20,"div",5),t.k0s()),2&n&&(t.R7$(6),t.Y8G("fullscreen",!0),t.R7$(),t.Y8G("ngIf",i.isLoading),t.R7$(),t.Y8G("ngIf",!i.isLoading&&i.event))},dependencies:[a.bv,a.Jm,a.QW,a.b_,a.I9,a.hU,a.W9,a.lO,a.eU,a.iq,a.uz,a.he,a.nf,a.ln,a.w2,a.BC,a.ai,a.el,d.MD,d.Sq,d.bT,d.vh,_.YN,_.X1],styles:['@charset "UTF-8";ion-content[_ngcontent-%COMP%]{margin-top:0}.content-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100%}.centered-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;flex:1;max-width:800px;margin:0 auto;padding:0 16px}.header-container[_ngcontent-%COMP%]{height:200px;background-size:cover;background-position:center;position:relative;display:flex;flex-direction:column;justify-content:flex-end;padding:20px;color:#fff;text-shadow:2px 2px 4px rgba(0,0,0,.7);margin-top:-70px}.header-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(to top,#000c,#0000)}.event-title[_ngcontent-%COMP%], .event-subtitle[_ngcontent-%COMP%]{position:relative;z-index:1;text-shadow:2px 2px 4px rgba(0,0,0,.7);text-align:center}.event-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:4px;margin-top:0}.event-subtitle[_ngcontent-%COMP%]{font-size:1rem;margin-top:0}.main-grid[_ngcontent-%COMP%]{margin-top:-50px;position:relative;z-index:2;width:100%}.main-grid[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{margin-bottom:16px}.main-grid[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]:last-child{margin-bottom:0}.detail-card[_ngcontent-%COMP%]{background:#2c2c2e;border-radius:12px;margin:0;color:#f5f5f5;height:100%;box-shadow:0 4px 12px #0000004d}.detail-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;margin-bottom:16px}.detail-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.8rem;color:#667eea;margin-right:16px;margin-top:4px}.detail-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:#aaa;margin:0 0 4px;text-transform:uppercase}.detail-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;color:#fff;margin:0}.detail-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.activities-title[_ngcontent-%COMP%]{color:#667eea;padding:0 16px;margin-bottom:16px;font-size:1.2rem;font-weight:600}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[name=checkmark-circle-outline][_ngcontent-%COMP%]{color:#667eea}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: transparent;--color: #f5f5f5;border-bottom:1px solid #999}ion-list[_ngcontent-%COMP%]{border-radius:12px;overflow:hidden}.action-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--background: transparent;--border-color: #667eea;--border-width: 1px;--border-style: solid;--color: #667eea;--border-radius: 8px;font-weight:500;text-transform:none;margin-bottom:8px}.action-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:hover{--background: rgba(102, 126, 234, .1)}.action-buttons[_ngcontent-%COMP%]   ion-button[color=danger][_ngcontent-%COMP%]{--border-color: #eb445a;--color: #eb445a}.action-buttons[_ngcontent-%COMP%]   ion-button[color=danger][_ngcontent-%COMP%]:hover{--background: rgba(235, 68, 90, .1)}@media (max-width: 768px){.centered-content[_ngcontent-%COMP%]{padding:0 8px;max-width:100%}.main-grid[_ngcontent-%COMP%]{margin-top:-30px}.main-grid[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{margin-bottom:12px}.header-container[_ngcontent-%COMP%]{height:150px;margin-top:-50px}.event-title[_ngcontent-%COMP%]{font-size:1.5rem}.event-subtitle[_ngcontent-%COMP%]{font-size:.9rem}}@media (max-width: 480px){.centered-content[_ngcontent-%COMP%]{padding:0 4px}.main-grid[_ngcontent-%COMP%]{margin-top:-20px}.main-grid[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{margin-bottom:8px}.header-container[_ngcontent-%COMP%]{height:120px;margin-top:-30px;padding:15px}.event-title[_ngcontent-%COMP%]{font-size:1.3rem}.event-subtitle[_ngcontent-%COMP%]{font-size:.8rem}.detail-item[_ngcontent-%COMP%]{margin-bottom:12px}.detail-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:12px}.detail-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:.8rem}.detail-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}}']}),c})()}}]);